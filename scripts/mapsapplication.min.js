function initMap(){function e(e){var t=new google.maps.MarkerImage("http://chart.googleapis.com/chart?chst=d_map_spin&chld=1.15|0|"+e+"|40|_|%E2%80%A2",new google.maps.Size(21,34),new google.maps.Point(0,0),new google.maps.Point(10,34),new google.maps.Size(21,34));return t}var t=[{featureType:"water",stylers:[{color:"#29b2ea"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{weight:4}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#13c7e8"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"on"},{color:"#f0e4d3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-35}]}],a={zoom:11,center:new google.maps.LatLng(37.387474,-122.057543),mapTypeControl:!0,disableDefaultUI:!1,styles:t,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!0};map=new google.maps.Map(document.getElementById("map"),a);var o=[{name:"Ames Research Center",lat:37.414869,lng:-122.048589,url:"https://www.nasa.gov/centers/ames/home/index.html",city:"Mountain View"},{name:"The Computer History Museum",lat:37.41441,lng:-122.07699,url:"http://www.computerhistory.org/",city:"Mountain View"},{name:"The Tech Museum",lat:37.3999,lng:-122.1084,url:"http://www.thetech.org",city:"San Jose"},{name:"HP Garage",lat:37.44303,lng:-122.15466,url:"http://www8.hp.com",city:"Palo Alto"},{name:"Steve Jobs Garage",lat:37.34035,lng:-122.06895,url:"http://www.apple.com/stevejobs/",city:"Los Altos"},{name:"Apple Headquarters",lat:37.33144,lng:-122.03063,url:"http://www.apple.com",city:"Cupertino"},{name:"Facebook Headquarters",lat:37.48319,lng:-122.15011,url:"http://www.facebook.com",city:"Menlo Park"},{name:"Google Headquarters",lat:37.4214,lng:-122.08537,url:"https://www.google.com/about/company/",city:"Mountain View"}],n=function(e,t){this.name=ko.observable(e.name),this.lat=ko.observable(e.lat),this.lng=ko.observable(e.lng),this.city=ko.observable(e.city),this.url=ko.observable(e.url),this.marker=ko.observable(),this.rating=ko.observable(),this.checkinCount=ko.observable(),this.state=ko.observable(),this.postCode=ko.observable(),this.country=ko.observable()},r=function(){var t=this;this.placeList=ko.observableArray([]),o.forEach(function(e){t.placeList.push(new n(e))});var a=new google.maps.InfoWindow,r=e("0091ff"),s=e("07eee6");t.placeList().forEach(function(e){function t(){null!==e.marker.getAnimation()?e.marker.setAnimation(null):e.marker.setAnimation(google.maps.Animation.BOUNCE)}marker=new google.maps.Marker({position:new google.maps.LatLng(e.lat(),e.lng()),map:map,animation:google.maps.Animation.DROP,icon:r,title:e.name()}),e.marker=marker;var o="https://api.foursquare.com/v2/venues/explore?limit=1&ll="+e.lat()+","+e.lng()+"&intent=self&query="+e.name()+"&client_id=PBLIDC53NETDZSL1OEND4SCI1AOPHG4MMTQ2PYV3O4I4EWDO&client_secret=I0IE4GRUSALOGYMYFQGF2IMSNMJJ52TH4AVLADMJAP5N01XJ&v=20140806";$.getJSON(o,function(t){results=t.response.groups[0].items[0].venue,e.name=results.name,e.rating=results.rating,e.checkinCount=results.stats.checkinsCount}).error(function(e){$("#foursquare-API-error").html("<h2>There was an errors when retrieving the data. Please try refresh page or try again later.</h2>")}),marker.addListener("mouseover",function(){this.setIcon(s)}),marker.addListener("mouseout",function(){this.setIcon(r)}),google.maps.event.addListener(e.marker,"click",function(){t(),setTimeout(t,1e3),setTimeout(function(){a.setContent("<h3>"+e.name+'</h3>\n<h5>FourSquare-Infos:</h5>\n<p><span class="glyphicon glyphicon-thumbs-up"></span> <span>: </span>'+e.rating+'</p>\n<p><span class="glyphicon glyphicon-home"></span> <span>: </span>'+e.checkinCount),a.open(map,e.marker),map.setZoom(14)},200)})}),t.show_info=function(e){google.maps.event.trigger(e.marker,"click")},t.filter=function(){var e=$("#searchField").val();console.log(e.toLowerCase().replace(/\b[a-z]/g,"KC")),e=e.toLowerCase().replace(/\b[a-z]/g,function(e){return console.log(e.toUpperCase()),e.toUpperCase()}),$(".locationList > li").each(function(){console.log(this),$(this).text().search(e)>-1?$(this).show():$(this).hide()});for(var a=0;a<t.placeList().length;a++)console.log(t.map),t.placeList()[a].marker.setMap(t.placeList()[a].marker.title.search(e)>-1?map:null)}};google.maps.event.addDomListener(window,"resize",function(){map.setCenter(new google.maps.LatLng(37.387474,-122.057543))});var s="http://api.wunderground.com/api/e6f14835285d1ad3/conditions/q/CA/San_Francisco.json";$.getJSON(s,function(e){var t=$(".forecast ul");detail=e.current_observation,t.append("<div>Temperature: "+detail.temp_c+"Â° C</div>"),t.append('<div><img style="width: 30px" src="'+detail.icon_url+'"> '+detail.icon+"</div>")}).error(function(e){$(".forecast").append('<p style="text-align: center;">Sorry! Weather Underground</p><p style="text-align: center;">Could Not Be Loaded</p>')});var i=$("#weather-image-container"),l=!1;i.click(function(){l===!1?($(window).width()<320?($(".forecast div").css("display","center"),i.animate({width:"320"},500)):($(".forecast div").css("display","inline-block"),i.animate({width:"380"},500)),l=!0):(i.animate({width:"100"},500),l=!1)}),ko.applyBindings(new r)}var map,marker;google.maps.event.addDomListener(window,"load",initMap);